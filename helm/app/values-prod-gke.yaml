replicaCount: 3

image:
  tag: "latest"
  pullPolicy: Always

serviceAccount:
  create: true
  annotations: {}
  name: ""

env:
  serviceName: "test-devops"
  enableMetrics: "true"
  ddDogstatsdPort: "8125"
  nodeEnv: "prod-gke"

resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 1500m
    memory: 2Gi

podAnnotations:
  env: "prod-gke"
  tier: "prod"
  cluster: "gke-prod"

podDisruptionBudget:
  enabled: true
  minAvailable: 2

networkPolicy:
  enabled: true

datadog:
  enabled: true
  apiKey: ""  # จะได้มาจาก Vault
  site: "datadoghq.com"
  useVaultSecrets: true

  agent:
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi

    apm:
      enabled: true

    processAgent:
      enabled: true

    networkMonitoring:
      enabled: true

# Vault configuration for secrets injection
vault:
  enabled: true
  address: "https://vault-devops.extosoft.app"
  skipTLSVerify: "true"
  roleName: "k8s-app"
  serviceAccount: "vault-auth"
  secrets:
    secretPath: "secret/data/k8s/test-devops-prod-gke"
    fields:
      appName: "APP_NAME"
      datadogApiKey: "DATA_DOG_API_KEY"
      nodeEnv: "NODE_ENV"

