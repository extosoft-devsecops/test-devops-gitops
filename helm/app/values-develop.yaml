replicaCount: 1

image:
  tag: "latest"

serviceAccount:
  create: true
  annotations: {}
  name: ""

env:
  serviceName: "test-devops"
  enableMetrics: "true"
  ddDogstatsdPort: "8125"
  nodeEnv: "develop"

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi

podAnnotations:
  env: "develop"
  tier: "nonprod"
  cluster: "gke-nonprod"

podDisruptionBudget:
  enabled: false

datadog:
  enabled: false  # ปิดการ deploy Datadog DaemonSet
  apiKey: ""  # จะได้มาจาก Vault
  site: "datadoghq.com"
  useVaultSecrets: true
  # External agent configuration
  externalAgent:
    enabled: true
    host: "datadog-agent.datadog.svc.cluster.local"  # Datadog service in datadog namespace
    port: 8125

  agent:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

# Vault configuration for secrets injection
vault:
  enabled: true
  address: "https://vault-devops.extosoft.app"
  skipTLSVerify: "true"
  roleName: "k8s-app"
  serviceAccount: "vault-auth"
  secrets:
    secretPath: "secret/data/k8s/test-devops-develop"
    fields:
      appName: "APP_NAME"
      datadogApiKey: "DATA_DOG_API_KEY"
      nodeEnv: "NODE_ENV"

# Updated to use Vault for Datadog secrets - Sun Nov 24 2025
