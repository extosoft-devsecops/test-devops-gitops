# ===========================
# üîß Development Environment Override
# ===========================
# ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏à‡∏∞ merge ‡∏Å‡∏±‡∏ö values.yaml (default values)
# Codefresh ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó image.tag ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

global:
  environment: develop

app:
  name: test-devops
  replicaCount: 1  # Development ‡πÉ‡∏ä‡πâ 1 replica ‡∏Å‡πá‡∏û‡∏≠

  image:
    registry: asia-southeast1-docker.pkg.dev
    repository: test-devops-478606/test-devops-images/test-devops
    pullPolicy: Always  # Always pull ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev
    tag: "latest"  # ‚Üê Codefresh ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ

  # Deployment metadata (Codefresh ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó)
  deployedAt: ""
  gitRevision: ""
  deployedBy: "codefresh"

  service:
    type: ClusterIP
    port: 3000
    targetPort: 3000

  # Environment Variables
  env:
    nodeEnv: development
    # STATSD_HOST ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å set ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô template

  # Health Checks - ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev
  probes:
    liveness:
      enabled: true
      path: /healthz
      port: 3000
      initialDelaySeconds: 15  # ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ production
      periodSeconds: 10
      timeoutSeconds: 3
      failureThreshold: 3
    readiness:
      enabled: true
      path: /ready
      port: 3000
      initialDelaySeconds: 5   # ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ production
      periodSeconds: 5
      timeoutSeconds: 2
      failureThreshold: 3

  # Resource Management - ‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ production
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

  # Pod Disruption Budget - ‡∏õ‡∏¥‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev
  podDisruptionBudget:
    enabled: false

  # HPA - ‡∏õ‡∏¥‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev (‡πÉ‡∏ä‡πâ fixed replicas)
  hpa:
    enabled: false

# ===========================
# üåê Ingress Configuration
# ===========================
ingress:
  enabled: true
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "false"  # ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö SSL ‡πÉ‡∏ô dev
    cert-manager.io/cluster-issuer: "letsencrypt-staging"  # ‡πÉ‡∏ä‡πâ staging cert

  hosts:
    - host: test-devops-dev.yourdomain.com
      paths:
        - path: /
          pathType: Prefix

  tls:
    enabled: false  # ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ self-signed cert
    # secretName: test-devops-dev-tls
    # hosts:
    #   - test-devops-dev.yourdomain.com

# ===========================
# üìä Graphite/StatsD
# ===========================
graphite:
  enabled: true

  image:
    registry: docker.io
    repository: graphiteapp/graphite-statsd
    tag: latest
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    httpPort: 80
    statsdPort: 8125

  # Persistence - ‡∏õ‡∏¥‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î cost
  persistence:
    enabled: false
    # size: 1Gi  # ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î

  # Resources - ‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
